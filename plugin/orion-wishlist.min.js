!function(){console.log("AAAA");var P=jQuery;if("function"!=typeof P.OrionWishlist){console.log("bbbb");let y={elements:{shelf:{selector:".cf-storefront.main",attrId:"data-product-id"}},wishlistPage:{idShelf:"7b8f00bc-2a4d-48fe-a944-4d8addf61af0",elements:{itemsUser:".cf-development.user-list",menssageEmpty:".cf-development.empty",loader:".cf-development.loader"}},entity:{name:"development",body:"cf-body"},total:{element:".icon-wishlist"},modal:{applySweetalert:!0,textConfirm:"Lista de desejos atualizada!"}};P.OrionWishlist=function(a){a=P.extend(!0,{},y,a);let e=P(a.elements.shelf.selector),s=a.elements.shelf.attrId,o={add:".o-shelf-wishlist--button.add",remove:".o-shelf-wishlist--button.remove"},l={add:".o-product-wishlist--button.add",remove:".o-product-wishlist--button.remove"},t={remove:".o-shelf-wishlist-user--button.remove"},n={dataUserParsed:null};var d;function i(){P(document).one("click",l.add,function(e){if(null==n.dataUserParsed)x();else{let e=n.dataUserParsed.useritems;null==e?e=[skuJson.productId]:e.push(skuJson.productId),U({id:n.dataUserParsed.id,email:n.dataUserParsed.email,useritems:e})}})}function r(){P(document).one("click",o.add,function(e){if(null==n.dataUserParsed)x();else{var t=P(this).closest(a.elements.shelf.selector).attr(a.elements.shelf.attrId),t=parseInt(t);let e=n.dataUserParsed.useritems;null==e?e=[t]:e.push(t),U({id:n.dataUserParsed.id,email:n.dataUserParsed.email,useritems:e})}})}function c(){P(document).one("click",l.remove,function(e){let t=n.dataUserParsed.useritems.filter(function(e){return e!==skuJson.productId});t.length||(t=[]),U({id:n.dataUserParsed.id,email:n.dataUserParsed.email,useritems:t})})}function u(){P(document).one("click",o.remove,function(e){let t=P(this).closest(a.elements.shelf.selector).attr(a.elements.shelf.attrId);t=parseInt(t);let s=n.dataUserParsed.useritems.filter(function(e){return e!==t});s.length||(s=[]),U({id:n.dataUserParsed.id,email:n.dataUserParsed.email,useritems:s})})}function m(){P(document).one("click",t.remove,function(e){let t=P(this).closest(a.elements.shelf.selector).attr(a.elements.shelf.attrId);t=parseInt(t);let s=n.dataUserParsed.useritems.filter(function(e){return e!==t});s.length||(s=[]),U({id:n.dataUserParsed.id,email:n.dataUserParsed.email,useritems:s})})}function f(){let t=!1;n.dataUserParsed.useritems.forEach(e=>{e==skuJson.productId&&(t=!0)}),t&&(P(l.add).addClass("hide"),P(l.remove).removeClass("hide"))}function I(){e.each(function(){let e=P(this),t=e.attr(s);n.dataUserParsed.useritems.find(function(e){return e==t})&&(e.find(o.add).addClass("hide"),e.find(o.remove).removeClass("hide"))})}function p(){let t=P(a.wishlistPage.elements.itemsUser),o=null;n.dataUserParsed.useritems.forEach((e,t,s)=>{o=0==t?"fq=productId:"+e:o+"&fq=productId:"+e});var e=`/buscapagina?${o}&PS=50&sl=${a.wishlistPage.idShelf}&cc=1&sm=0`;P.ajax({type:"GET",url:e}).done(function(e){t.append(e),m(),g()})}function h(){let e=P(a.total.element),t=n.dataUserParsed.useritems.length||0;e.text(t)}function v(){P(a.wishlistPage.elements.loader).addClass("hide"),P(a.wishlistPage.elements.menssageEmpty).removeClass("hide")}function U(t){var e=n.dataUserParsed.id;P.ajax({type:"PATCH",url:`/api/dataentities/${a.entity.name}/documents/${e}?_schema=`+a.entity.body,dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"},data:JSON.stringify(t)}).done(function(e){localStorage.setItem("OW_listUser",JSON.stringify(t)),1==a.modal.applySweetalert?"undefined"==typeof swal?(alert(a.modal.textConfirm),location.reload()):swal({title:a.modal.textConfirm,icon:"success"}).then(()=>{location.reload()}):0==a.modal.applySweetalert&&(alert(a.modal.textConfirm),location.reload())})}function x(){return null==n.dataUserParsed&&(vtexid.start(),function(){let e=setInterval(function(){P("#vtexIdContainer.ng-scope").length&&(clearInterval(e),P("#vtexIdContainer.ng-scope").find("#vtexIdUI-confirm-access-code .close.vtexIdUI-close,#vtexIdUI-auth-selector .close.vtexIdUI-close,#vtexIdUI-classic-login .close.vtexIdUI-close,#vtexIdUI-email-confirmation .close.vtexIdUI-close,#vtexIdUI-mfa-phone-number-confirmation .close.vtexIdUI-close,#vtexIdUI-mfa-code-confirmation .close.vtexIdUI-close,#vtexIdUI-logout .close.vtexIdUI-close,#texIdUI-multiple-link-account .close.vtexIdUI-close,#vtexIdUI-change-pswd .close.vtexIdUI-close,#vtexIdUI-change-exp-pswd .close.vtexIdUI-close,#vtexIdUI-force-mfa-new-user .close.vtexIdUI-close,#vtexIdUI-force-mfa-mandatory .close.vtexIdUI-close,#vtexIdUI-configure-user-MFA .close.vtexIdUI-close,#vtexIdUI-show-message-and-redirect .close.vtexIdUI-close,#vtexIdUI-realod-page-message .close.vtexIdUI-close,#vtexIdUI-jsError-component .close.vtexIdUI-close,#vtexIdUI-choose-mfa-login-type .close.vtexIdUI-close,#vtexIdUI-configure-mfa-application .close.vtexIdUI-close,#vtexIdUI-force-mfa-date-reminder .close.vtexIdUI-close").on("click",function(){r(),u(),P(document.body).is(".product")&&(i(),c()),P(document.body).is(".wishlist")&&m()}))},50)}(),0)}function g(){P(".o-shelf-wishlist--button, .o-product-wishlist--button, .o-shelf-wishlist-user--button").removeClass("button-loaded")}r(),u(),P(document.body).is(".product")&&(console.log("CCCC"),i(),c()),localStorage&&localStorage.OW_listUser&&localStorage.OW_listUser.length?(console.log("dddd"),d=JSON.parse(localStorage.OW_listUser),(n.dataUserParsed=d).useritems.length?(P(document.body).is(".product")&&f(),P(document.body).is(".wishlist")&&p(),h(),I(),g(),P(a.wishlistPage.elements.loader).addClass("hide")):(g(),P(document.body).is(".wishlist")&&v())):(console.log("EEEE"),vtexjs.checkout.getOrderForm().done(function(e){var s,t;e.clientProfileData&&null!=e.clientProfileData.email?(t=(s=e).clientProfileData.email,console.log("HHHH"),P.ajax({type:"GET",url:`/api/dataentities/${a.entity.name}/search?_schema=${a.entity.body}&email=`+t,dataType:"json",contentType:"application/json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(e){console.log("iii"),console.log(e),e.length?(localStorage.setItem("OW_listUser",JSON.stringify(e[0])),n.dataUserParsed=e[0],P(document.body).is(".product")&&f(),P(document.body).is(".wishlist")&&p(),h(),I()):function(){let t={email:s.clientProfileData.email,useritems:[]};P.ajax({type:"POST",url:`/api/dataentities/${a.entity.name}/documents?_schema=`+a.entity.body,dataType:"json",contentType:"application/json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},data:JSON.stringify(t)}).done(function(e){t.id=e.DocumentId,localStorage.setItem("OW_listUser",JSON.stringify(t))})}(),g()}),console.log("ffff")):(console.log("GGGG"),console.log(e),x(),g(),P(document.body).is(".wishlist")&&v())}))}}}();